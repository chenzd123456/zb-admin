# zb-admin 项目学习教程

## 1. 项目架构概述

### 1.1 技术栈
- 前端框架: Vue 3 + TypeScript
- 状态管理: Pinia
- 路由: Vue Router
- UI组件库: Element Plus
- 构建工具: Vite

### 1.2 目录结构
```
src/
├── api/        # API请求封装
├── assets/     # 静态资源
├── components/ # 公共组件
├── config/     # 全局配置
├── hooks/      # 组合式函数  
├── layout/     # 布局组件
├── router/     # 路由配置
├── store/      # 状态管理
├── utils/      # 工具函数
└── views/      # 页面视图
```

## 2. 核心模块详解

### 2.1 权限系统
#### 动态路由加载流程
1. 用户登录获取角色信息
2. 调用`generateRoutes`过滤可访问路由
3. 合并基础路由和动态路由
4. 通过`router.addRoute`注册路由

#### 关键代码
```typescript
// 权限验证方法
function hasPermission(roles, route) {
  return roles.some(role => route.meta?.roles?.includes(role))
}

// 路由过滤
function filterAsyncRoutes(routes, roles) {
  return routes.filter(route => {
    if (hasPermission(roles, route)) {
      if (route.children) {
        route.children = filterAsyncRoutes(route.children, roles)
      }
      return true
    }
    return false
  })
}
```

### 2.2 路由系统
#### 路由配置规范
```typescript
{
  path: '/system',
  component: Layout,
  meta: { 
    title: '系统管理',
    icon: 'system',
    roles: ['admin'] // 访问权限
  },
  children: [
    {
      path: 'user',
      component: () => import('@/views/system/user'),
      meta: { title: '用户管理' }
    }
  ]
}
```

### 2.3 组件系统
#### 组件开发规范
1. **命名规范**：PascalCase命名组件和目录
2. **Props设计**：明确定义类型和默认值
3. **插槽设计**：提供默认插槽和命名插槽
4. **事件设计**：使用emits明确声明事件

#### 示例组件
```vue
<!-- SvgIcon组件 -->
<template>
  <svg :class="svgClass">
    <use :xlink:href="`#icon-${iconClass}`" />
  </svg>
</template>

<script setup>
defineProps({
  iconClass: { type: String, required: true },
  className: { type: String, default: '' }
})
</script>
```

## 3. 开发规范

### 3.1 API规范
- 所有请求通过`src/api/request.ts`封装的axios实例
- 模块化组织API接口
- 统一错误处理

### 3.2 状态管理
- 使用Pinia进行状态管理
- 按功能模块划分store
- 避免直接修改state，使用actions

### 3.3 代码风格
- 使用ESLint + Prettier统一代码风格
- 组件使用`<script setup>`语法
- TypeScript类型定义完善

## 4. 最佳实践

### 4.1 性能优化
1. 路由懒加载
2. 组件异步加载
3. 列表虚拟滚动
4. 计算属性缓存

### 4.2 可维护性
1. 清晰的目录结构
2. 完善的文档注释
3. 单元测试覆盖
4. 类型定义完善

### 4.3 扩展性
1. 配置化设计
2. 插件机制
3. 主题定制
4. 国际化支持